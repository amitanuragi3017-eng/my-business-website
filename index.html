<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: #f8fafc;
            color: #334155;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #1e293b;
        }
        
        .dashboard-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }
        
        .card h2 {
            font-size: 14px;
            font-weight: 600;
            color: #64748b;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat {
            font-size: 32px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 8px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #64748b;
        }
        
        .controls {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        
        .search-box {
            flex: 1;
            min-width: 300px;
            padding: 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
        }
        
        .search-box::placeholder {
            color: #94a3b8;
        }
        
        .filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 8px 16px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            color: #475569;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .filter-btn:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }
        
        .clear-btn {
            background: #ef4444;
            color: white;
            border: none;
        }
        
        .clear-btn:hover {
            background: #dc2626;
        }
        
        .add-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .add-btn:hover {
            background: #2563eb;
        }
        
        table {
            width: 100%;
            background: white;
            border-radius: 12px;
            border-collapse: collapse;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-top: 20px;
        }
        
        thead {
            background: #f8fafc;
            border-bottom: 2px solid #e2e8f0;
        }
        
        th {
            padding: 16px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        td {
            padding: 16px;
            font-size: 14px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        tbody tr:hover {
            background: #f8fafc;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            display: inline-block;
        }
        
        .status-completed {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-processing {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .action-btn {
            background: none;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 12px;
            margin-right: 4px;
            transition: background 0.2s;
        }
        
        .action-btn:hover {
            background: #f1f5f9;
        }
        
        .edit-btn {
            color: #3b82f6;
            border-color: #93c5fd;
        }
        
        .delete-btn {
            color: #ef4444;
            border-color: #fca5a5;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 32px;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
        }
        
        .modal h3 {
            margin-bottom: 24px;
            color: #1e293b;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #475569;
        }
        
        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 32px;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .btn-primary:hover {
            background: #2563eb;
        }
        
        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .btn-secondary:hover {
            background: #e2e8f0;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none;
            z-index: 1001;
        }
    </style>
</head>
<body>
    <h1>Payment Dashboard</h1>
    
    <!-- Dashboard Stats -->
    <div class="dashboard-section">
        <div class="card">
            <h2>TOTAL PAYMENTS</h2>
            <div class="stat" id="total-payments">10</div>
            <div class="stat-label">Total count of payments</div>
        </div>
        
        <div class="card">
            <h2>PENDING</h2>
            <div class="stat" id="pending-count">3</div>
            <div class="stat-label">Awaiting confirmation</div>
        </div>
        
        <div class="card">
            <h2>RECEIVED</h2>
            <div class="stat" id="received-count">0</div>
            <div class="stat-label">Successfully received</div>
        </div>
        
        <div class="card">
            <h2>TOTAL AMOUNT</h2>
            <div class="stat" id="total-amount">$14,296.25</div>
            <div class="stat-label">Sum of all payments</div>
        </div>
    </div>
    
    <!-- Controls -->
    <div class="controls">
        <input type="text" class="search-box" placeholder="Search vendors or networks..." id="search-input" onkeyup="filterPayments()">
        
        <div class="filters">
            <button class="filter-btn">All Networks</button>
            <button class="filter-btn">All Status</button>
            <button class="filter-btn">All Vendors</button>
            <button class="filter-btn clear-btn" onclick="clearFilters()">Clear Filters</button>
            <button class="add-btn" onclick="openAddModal()">+ Add Payment</button>
        </div>
    </div>
    
    <!-- Payments Table -->
    <table id="payments-table">
        <thead>
            <tr>
                <th>Network</th>
                <th>Vendor Name</th>
                <th>Amount</th>
                <th>Date</th>
                <th>Due Date</th>
                <th>Status</th>
                <th>Payment Method</th>
                <th>Invoice #</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="payments-body">
            <!-- Payments will be loaded here from localStorage -->
        </tbody>
    </table>
    
    <!-- Add/Edit Modal -->
    <div class="modal" id="payment-modal">
        <div class="modal-content">
            <h3 id="modal-title">Add New Payment</h3>
            <form id="payment-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>Network</label>
                        <input type="text" class="form-input" id="network-input" placeholder="e.g., undefined">
                    </div>
                    <div class="form-group">
                        <label>Vendor Name</label>
                        <input type="text" class="form-input" id="vendor-input" placeholder="e.g., Salesforce" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Amount</label>
                        <input type="number" class="form-input" id="amount-input" placeholder="e.g., 4200.00" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" class="form-input" id="date-input" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Due Date</label>
                        <input type="date" class="form-input" id="due-date-input" required>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select class="form-input" id="status-input" required>
                            <option value="Pending">Pending</option>
                            <option value="Completed">Completed</option>
                            <option value="Processing">Processing</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Payment Method</label>
                        <select class="form-input" id="method-input" required>
                            <option value="Credit Card">Credit Card</option>
                            <option value="Bank Transfer">Bank Transfer</option>
                            <option value="PayPal">PayPal</option>
                            <option value="Cash">Cash</option>
                            <option value="Check">Check</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Invoice #</label>
                        <input type="text" class="form-input" id="invoice-input" placeholder="e.g., SF-010" required>
                    </div>
                </div>
                
                <div class="modal-buttons">
                    <button type="button" class="btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn-primary" id="modal-submit-btn">Save Payment</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">Payment saved successfully!</div>
    
    <script>
        // DATA STORAGE - localStorage on your laptop
        const STORAGE_KEY = 'payment_dashboard_data';
        let payments = [];
        let editingId = null;
        
        // Initialize with sample data if empty
        function initializeData() {
            const savedData = localStorage.getItem(STORAGE_KEY);
            
            if (savedData) {
                payments = JSON.parse(savedData);
            } else {
                // Sample data matching your mockup
                payments = [
                    {
                        id: 1,
                        network: "undefined",
                        vendor: "Salesforce",
                        amount: 4200.00,
                        date: "2024-01-28",
                        dueDate: "2024-02-15",
                        status: "Completed",
                        method: "Credit Card",
                        invoice: "SF-010"
                    },
                    {
                        id: 2,
                        network: "undefined",
                        vendor: "Atlassian",
                        amount: 950.00,
                        date: "2024-01-25",
                        dueDate: "2024-02-10",
                        status: "Pending",
                        method: "Bank Transfer",
                        invoice: "AT-009"
                    },
                    {
                        id: 3,
                        network: "undefined",
                        vendor: "GitHub Inc",
                        amount: 75.00,
                        date: "2024-01-22",
                        dueDate: "2024-02-08",
                        status: "Processing",
                        method: "PayPal",
                        invoice: "GH-008"
                    },
                    {
                        id: 4,
                        network: "undefined",
                        vendor: "Dropbox Inc",
                        amount: 155.00,
                        date: "2024-01-20",
                        dueDate: "2024-02-05",
                        status: "Completed",
                        method: "Credit Card",
                        invoice: "DB-007"
                    },
                    {
                        id: 5,
                        network: "undefined",
                        vendor: "Zoom Video",
                        amount: 290.00,
                        date: "2024-01-18",
                        dueDate: "2024-02-01",
                        status: "Completed",
                        method: "PayPal",
                        invoice: "ZM-006"
                    }
                ];
                saveToLocalStorage();
            }
            
            renderPayments();
            updateStats();
        }
        
        // SAVE to localStorage (your laptop)
        function saveToLocalStorage() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(payments));
            console.log('Data saved to localStorage:', payments.length, 'payments');
        }
        
        // RENDER payments table
        function renderPayments(filteredPayments = null) {
            const data = filteredPayments || payments;
            const tbody = document.getElementById('payments-body');
            
            tbody.innerHTML = '';
            
            data.forEach(payment => {
                const formattedDate = formatDate(payment.date);
                const formattedDueDate = formatDate(payment.dueDate);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${payment.network || 'undefined'}</td>
                    <td>${payment.vendor}</td>
                    <td>$${payment.amount.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                    <td>${formattedDate}</td>
                    <td>${formattedDueDate}</td>
                    <td><span class="status-badge status-${payment.status.toLowerCase()}">${payment.status}</span></td>
                    <td>${payment.method}</td>
                    <td>${payment.invoice}</td>
                    <td>
                        <button class="action-btn edit-btn" onclick="editPayment(${payment.id})">Edit</button>
                        <button class="action-btn delete-btn" onclick="deletePayment(${payment.id})">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        // UPDATE dashboard statistics
        function updateStats() {
            const totalPayments = payments.length;
            const pendingCount = payments.filter(p => p.status === 'Pending').length;
            const receivedCount = payments.filter(p => p.status === 'Completed').length;
            const totalAmount = payments.reduce((sum, p) => sum + p.amount, 0);
            
            document.getElementById('total-payments').textContent = totalPayments;
            document.getElementById('pending-count').textContent = pendingCount;
            document.getElementById('received-count').textContent = receivedCount;
            document.getElementById('total-amount').textContent = `$${totalAmount.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
        }
        
        // ADD new payment
        function addPayment(paymentData) {
            const newPayment = {
                id: Date.now(), // Unique ID
                ...paymentData
            };
            
            payments.push(newPayment);
            saveToLocalStorage();
            renderPayments();
            updateStats();
            showNotification('Payment added successfully!');
        }
        
        // EDIT payment
        function editPayment(id) {
            const payment = payments.find(p => p.id === id);
            if (!payment) return;
            
            editingId = id;
            
            // Fill form with payment data
            document.getElementById('network-input').value = payment.network;
            document.getElementById('vendor-input').value = payment.vendor;
            document.getElementById('amount-input').value = payment.amount;
            document.getElementById('date-input').value = payment.date;
            document.getElementById('due-date-input').value = payment.dueDate;
            document.getElementById('status-input').value = payment.status;
            document.getElementById('method-input').value = payment.method;
            document.getElementById('invoice-input').value = payment.invoice;
            
            document.getElementById('modal-title').textContent = 'Edit Payment';
            document.getElementById('modal-submit-btn').textContent = 'Update Payment';
            openModal();
        }
        
        // UPDATE payment
        function updatePayment(id, paymentData) {
            const index = payments.findIndex(p => p.id === id);
            if (index === -1) return;
            
            payments[index] = { id, ...paymentData };
            saveToLocalStorage();
            renderPayments();
            updateStats();
            showNotification('Payment updated successfully!');
        }
        
        // DELETE payment
        function deletePayment(id) {
            if (confirm('Are you sure you want to delete this payment?')) {
                payments = payments.filter(p => p.id !== id);
                saveToLocalStorage();
                renderPayments();
                updateStats();
                showNotification('Payment deleted successfully!');
            }
        }
        
        // FILTER payments
        function filterPayments() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            
            if (!searchTerm) {
                renderPayments();
                return;
            }
            
            const filtered = payments.filter(payment => 
                payment.vendor.toLowerCase().includes(searchTerm) ||
                payment.invoice.toLowerCase().includes(searchTerm) ||
                payment.network.toLowerCase().includes(searchTerm)
            );
            
            renderPayments(filtered);
        }
        
        // CLEAR filters
        function clearFilters() {
            document.getElementById('search-input').value = '';
            renderPayments();
        }
        
        // MODAL functions
        function openModal() {
            document.getElementById('payment-modal').style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('payment-modal').style.display = 'none';
            editingId = null;
            document.getElementById('payment-form').reset();
            document.getElementById('modal-title').textContent = 'Add New Payment';
            document.getElementById('modal-submit-btn').textContent = 'Save Payment';
        }
        
        function openAddModal() {
            editingId = null;
            document.getElementById('payment-form').reset();
            
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            const nextWeek = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
            
            document.getElementById('date-input').value = today;
            document.getElementById('due-date-input').value = nextWeek;
            
            openModal();
        }
        
        // FORM submission
        document.getElementById('payment-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const paymentData = {
                network: document.getElementById('network-input').value || 'undefined',
                vendor: document.getElementById('vendor-input').value,
                amount: parseFloat(document.getElementById('amount-input').value),
                date: document.getElementById('date-input').value,
                dueDate: document.getElementById('due-date-input').value,
                status: document.getElementById('status-input').value,
                method: document.getElementById('method-input').value,
                invoice: document.getElementById('invoice-input').value
            };
            
            if (editingId) {
                updatePayment(editingId, paymentData);
            } else {
                addPayment(paymentData);
            }
            
            closeModal();
        });
        
        // UTILITY functions
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric'
            });
        }
        
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // BACKUP data (download JSON file)
        function backupData() {
            const dataStr = JSON.stringify(payments, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'payment-dashboard-backup.json';
            link.click();
            
            showNotification('Backup downloaded successfully!');
        }
        
        // RESTORE data from file
        function restoreData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const restoredData = JSON.parse(e.target.result);
                    payments = restoredData;
                    saveToLocalStorage();
                    renderPayments();
                    updateStats();
                    showNotification('Data restored successfully!');
                } catch (error) {
                    alert('Error restoring data: Invalid file format');
                }
            };
            reader.readAsText(file);
        }
        
        // EXPORT to CSV
        function exportToCSV() {
            const headers = ['Network', 'Vendor', 'Amount', 'Date', 'Due Date', 'Status', 'Method', 'Invoice'];
            const rows = payments.map(p => [
                p.network,
                p.vendor,
                `$${p.amount.toFixed(2)}`,
                formatDate(p.date),
                formatDate(p.dueDate),
                p.status,
                p.method,
                p.invoice
            ]);
            
            const csvContent = [
                headers.join(','),
                ...rows.map(row => row.map(cell => `"${cell}"`).join(','))
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'payments-export.csv';
            link.click();
            
            showNotification('Exported to CSV successfully!');
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeData();
            
            // Close modal on outside click
            document.getElementById('payment-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
            
            // Add backup/restore buttons to page
            const controls = document.querySelector('.controls');
            const backupBtn = document.createElement('button');
            backupBtn.className = 'filter-btn';
            backupBtn.textContent = 'Backup Data';
            backupBtn.onclick = backupData;
            backupBtn.style.background = '#10b981';
            backupBtn.style.color = 'white';
            
            const restoreBtn = document.createElement('button');
            restoreBtn.className = 'filter-btn';
            restoreBtn.textContent = 'Restore Data';
            restoreBtn.onclick = () => document.getElementById('file-input').click();
            restoreBtn.style.background = '#f59e0b';
            restoreBtn.style.color = 'white';
            
            const exportBtn = document.createElement('button');
            exportBtn.className = 'filter-btn';
            exportBtn.textContent = 'Export CSV';
            exportBtn.onclick = exportToCSV;
            exportBtn.style.background = '#8b5cf6';
            exportBtn.style.color = 'white';
            
            controls.appendChild(backupBtn);
            controls.appendChild(restoreBtn);
            controls.appendChild(exportBtn);
            
            // Hidden file input for restore
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.id = 'file-input';
            fileInput.accept = '.json';
            fileInput.style.display = 'none';
            fileInput.onchange = restoreData;
            document.body.appendChild(fileInput);
            
            console.log('Payment Dashboard initialized. Data stored in localStorage.');
            console.log('To view stored data in browser console:');
            console.log('1. Press F12');
            console.log('2. Go to Console tab');
            console.log('3. Type: localStorage.getItem("payment_dashboard_data")');
        });
    </script>
</body>
</html>
